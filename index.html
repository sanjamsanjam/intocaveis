<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Portal do Time âš½</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { margin:0; font-family:Arial; background:#f1f5f9 }
header { background:#0f172a; color:white; padding:15px }
nav button {
  margin:5px; padding:8px 12px; border:none;
  border-radius:6px; cursor:pointer;
  background:#22c55e; color:white
}
section { display:none; padding:20px }
.card {
  background:white; padding:15px;
  border-radius:10px; margin-bottom:20px
}
.player {
  display:inline-block; width:160px; margin:10px;
  background:white; border-radius:10px;
  padding:10px; text-align:center
}
.player img {
  width:100%; height:120px;
  object-fit:cover; border-radius:8px
}
input { padding:6px; margin:4px; width:95% }
</style>
</head>

<body>

<header>
<h2>âš½ Portal do Time</h2>
<nav>
<button onclick="show('jogadores')">Jogadores</button>
</nav>
</header>

<section id="jogadores">
<div class="card">
<h3>Cadastrar Jogador</h3>
<input id="nome" placeholder="Nome">
<input id="posicao" placeholder="PosiÃ§Ã£o">
<input id="foto" type="file">
<button onclick="salvar()">Salvar</button>
</div>

<div id="lista"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
// ðŸ”‘ SUBSTITUA AQUI
const supabase = supabaseJs.createClient(
  "https://SUA_BASE_URL.supabase.co",
  "SUA_PUBLISHABLE_KEY"
);

const FOTO_PADRAO = "https://via.placeholder.com/150";

// mostrar seÃ§Ã£o
function show(id){
  document.querySelectorAll("section").forEach(s=>s.style.display="none");
  document.getElementById(id).style.display="block";
}
show("jogadores");

// carregar jogadores
async function carregar(){
  const { data, error } = await supabase
    .from("jogadores")
    .select("*")
    .order("id");

  if(error){
    alert("Erro ao carregar jogadores");
    console.error(error);
    return;
  }

  lista.innerHTML = "";
  data.forEach(j=>{
    lista.innerHTML += `
      <div class="player">
        <img src="${j.foto || FOTO_PADRAO}">
        <b>${j.nome}</b>
        <p>${j.posicao}</p>
      </div>
    `;
  });
}

// salvar jogador
async function salvar(){
  if(!nome.value || !posicao.value){
    alert("Preencha nome e posiÃ§Ã£o");
    return;
  }

  const inserir = async (fotoUrl) => {
    const { error } = await supabase
      .from("jogadores")
      .insert({
        nome: nome.value,
        posicao: posicao.value,
        foto: fotoUrl
      });

    if(error){
      alert("Erro ao salvar");
      console.error(error);
      return;
    }

    nome.value = posicao.value = foto.value = "";
    carregar();
  };

  if(foto.files[0]){
    const r = new FileReader();
    r.onload = () => inserir(r.result);
    r.readAsDataURL(foto.files[0]);
  } else {
    inserir(FOTO_PADRAO);
  }
}

carregar();
</script>

</body>
</html>

